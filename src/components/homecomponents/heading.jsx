import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { SplitText } from 'gsap/SplitText'
gsap.registerPlugin(SplitText);
gsap.registerPlugin(ScrollTrigger);

const Heading = () => {
    const imgRef = useRef();
    const imgRef2 = useRef();
    const imgRef3 = useRef();
    const imgRef4 = useRef();
    const imgRef5 = useRef();
    const headingRef = useRef();
    const svgRef = useRef();



    useEffect(() => {

      
        document.fonts.ready.then(() => {
        const split = new SplitText(headingRef.current, { type: "chars" });
        gsap.fromTo(
            split.chars,
            { y: 50, opacity: 0 , },  // start 50px down and invisible
            {
                y: 0,                 // move to original position
                opacity: 1,           // fade in
                stagger: 0.05,        // one after another
                ease: "expo.out",     // smooth easing
                duration: 1,
                scrollTrigger: {
                    trigger: '.heading-wrapper',
                    start: 'center bottom',
                }
            });
        });
        // gsap.to(svgRef.current,{
        // y:20,
        //     scrollTrigger:{
        //         trigger:'.wrapper',
        //         start: 'bottom bottom',
        //         end:'bottom top',
        //         scrub: 1.5,
        //     }
        // })
        gsap.to(imgRef.current, {
            y: -500,
            ease: "power1.out",
            scrollTrigger: {
                trigger: ".wrapper",
                start: "center bottom",
                end: "bottom top",
                scrub: 1.5,
            },
        });
        gsap.to(imgRef2.current, {
            y: -500,
            ease: "power1.out",
            scrollTrigger: {
                trigger: ".wrapper",
                start: "top bottom",
                end: "bottom top",
                scrub: 1.5,
            },
        });
        gsap.to(imgRef3.current, {
            y: -500,
            ease: "power1.out",
            scrollTrigger: {
                trigger: ".heading-wrapper",
                start: "top bottom",
                end: "bottom top",
                scrub: 1.5,
            },
        });
        gsap.to(imgRef4.current, {
            y: -500,
            ease: "power1.out",
            scrollTrigger: {
                trigger: ".heading-wrapper",
                start: "top bottom",
                end: "bottom top",
                scrub: 1.5,
            },
        });
        gsap.to(imgRef5.current, {
            y: -500,
            ease: "power1.out",
            scrollTrigger: {
                trigger: ".heading-wrapper",
                start: "top bottom",
                end: "bottom top",
                scrub: 1.5,
                toggleActions: 'play none none reverse',
            },
        });
    }, []);
    return (
        <>
            <section className='h-[200vh] w-full bg-[#fbf0db] pt-[100px] '>
                <div className=" wrapper relative  h-[95vh] w-full flex justify-center  ">
                    <div className="middle-img">
                        <img src="/imghome/3rd.png" alt="middle-img" className='h-[700px] w-[650px] mt-[10px]' />
                    </div>
                    <div className="left-img">
                        <img src="/imghome/5th.png" ref={imgRef} className='absolute top-[80vh] left-10 h-[160px] w-[190px]' alt="left-img" />
                    </div>
                    <div className="right-img">
                        <img src="/imghome/6th.png" ref={imgRef2} className='absolute top-[75vh] right-10 h-[150px] w-[250px]' alt="left-img" />
                    </div>
                </div>
                <div className="heading-wrapper h-[96vh] w-full  relative ">
                    <img src="/imghome/7th.png" ref={imgRef3} className="h-[187px] left-img w-[332px] absolute top-[50vh] left-10 z-99" alt="" />
                    <img src="/imghome/8th.png" ref={imgRef4} className="h-[208px] center-img w-[208px] absolute right-[43%] bottom-1/8 z-99" alt="" />
                    <img src="/imghome/9th.png" ref={imgRef5} className="h-[291px] right-img w-[291px] absolute right-10 bottom-[30vh] z-99" alt="" />
                    <h1 className="scroll absolute left-40 top-[25%] leading-[0.9] text-center text-[230px] text-[#1e1005]" ref={headingRef}>THE ART OF <br /> INNOVATION</h1>
                    <div className="sub-heading scroll uppercase absolute flex flex-col space-y-2 items-center text-[#1e1005] left-[45vw] top-10 ">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 130 20"
                            fill="currentColor"
                            className="h-[100px] w-[100px]"
                            ref={svgRef}
                        >
                            <path d="M58.3361 10.096C58.3361 10.672 57.8241 10.736 57.3761 10.736H39.0721C39.0721 11.952 39.264 17.136 39.264 18.16C39.264 20.208 37.1521 20.336 36.896 20.336C35.488 20.336 35.488 19.824 35.488 17.904H30.4961V24.752H42.592L44.1281 23.024C44.3841 22.64 44.576 22.512 44.896 22.512C45.1521 22.512 45.3441 22.64 45.8561 23.024L48.6081 25.072C48.8641 25.264 49.1201 25.456 49.1201 25.84C49.1201 26.672 47.5201 27.248 46.8801 27.504C46.8161 28.784 46.8161 30.384 47.008 33.136C47.008 33.648 47.2001 36.72 47.2001 37.104C47.2001 38.192 47.008 38.704 46.3041 39.088C45.472 39.6 44.576 39.664 44.32 39.664C43.744 39.664 43.3601 39.344 43.3601 38.704C43.3601 38.576 43.424 37.616 43.4881 37.424H30.5601L30.688 44.528H49.376L51.4881 41.904C52.0641 41.136 52.1921 41.136 52.5121 41.136C52.8321 41.136 53.0241 41.264 53.6641 41.84L56.6081 44.4C56.9281 44.656 57.2481 44.976 57.2481 45.424C57.2481 46 56.736 46.064 56.2881 46.064H30.688C30.688 47.6 30.8801 55.28 30.8801 56.368C30.8801 59.376 28.128 59.44 27.8081 59.44C26.72 59.44 26.4641 58.864 26.4641 57.712C26.4641 57.264 26.72 47.28 26.784 46.064H11.744C9.44005 46.064 5.92005 46.32 3.48805 46.832L1.95205 44.08C6.75205 44.464 11.424 44.528 12.64 44.528H26.784L26.976 37.424H14.176C14.048 40.304 11.616 40.304 11.488 40.304C10.4 40.304 10.336 39.472 10.336 39.152C10.336 38.896 10.4 38.32 10.4 38C10.528 35.184 10.784 31.792 10.784 29.68C10.784 25.904 10.656 25.2 10.208 22.576L15.008 24.752H27.0401V17.904H21.664C21.792 19.952 19.936 20.464 19.168 20.464C18.016 20.464 18.016 19.568 18.016 19.248C18.016 17.648 18.08 12.464 18.144 10.736H10.528C8.28805 10.736 4.76805 10.992 2.33605 11.504L0.800049 8.752C5.60005 9.136 10.272 9.2 11.424 9.2H18.144C18.144 6.896 18.144 2.928 17.248 0.432003L23.328 2.416C23.712 2.544 24.032 2.736 24.032 3.184C24.032 3.696 23.584 3.952 21.7281 4.784C21.664 6.384 21.6 7.344 21.536 9.2H35.6161C35.6161 6.128 35.6161 2.8 34.7201 0.240002L40.5441 2.288C40.9281 2.416 41.376 2.608 41.376 3.056C41.376 3.76 40.6081 4.08 39.1361 4.848C39.0721 5.872 39.008 6.384 39.008 9.2H50.1441L52.32 6.32C52.7681 5.744 52.9601 5.488 53.4081 5.488C53.6641 5.488 53.792 5.552 54.4961 6.192L57.6961 9.072C58.0801 9.456 58.3361 9.648 58.3361 10.096ZM43.4881 35.888V26.288H30.4961V35.888H43.4881ZM27.0401 35.888V26.288H14.176V35.888H27.0401ZM35.6161 10.736H21.536C21.6 12.336 21.6 14.832 21.664 16.368H35.5521C35.5521 14.512 35.6161 11.248 35.6161 10.736Z" />
                            <path d="M121.12 22.512C121.12 23.216 120.48 23.216 120.16 23.216H109.92C109.92 23.728 110.176 40.304 110.176 42.352C110.176 42.8 110.624 55.28 110.624 55.856C110.624 58.096 108.256 58.672 107.552 58.672C106.144 58.672 106.08 57.52 106.08 57.072C106.08 55.984 106.4 50.544 106.464 49.328C106.72 39.664 106.72 32.368 106.72 30.896C106.72 28.4 106.656 25.712 106.528 23.216H98.784C98.784 40.496 95.2641 51.504 84.896 56.944L84.6401 56.688C92.6401 48.496 95.456 41.776 95.456 19.888C95.456 14.768 95.328 9.648 95.2001 7.664C95.072 6.128 94.8161 4.848 94.5601 3.824L99.6801 6.32C102.24 5.616 104.736 4.656 107.104 3.632C109.024 2.8 110.688 1.456 111.776 0.304001L116.128 4.144C116.448 4.464 116.512 4.592 116.512 4.848C116.512 5.232 116.256 5.552 115.552 5.552C115.168 5.552 115.04 5.552 112.992 5.104C110.24 5.936 102.432 6.96 98.912 7.408C98.656 11.376 98.848 17.712 98.784 21.68H114.016L115.616 19.248C115.808 18.992 116.256 18.352 116.704 18.352C116.96 18.352 117.216 18.48 117.92 19.12L120.48 21.424C120.608 21.552 121.12 22.128 121.12 22.512ZM92.512 9.584C92.512 10.16 92 10.288 91.552 10.288H74.016C72.032 10.288 68.3841 10.48 65.8241 10.992L64.288 8.24C67.808 8.56 71.392 8.752 74.912 8.752H76.4481C76.5121 7.088 76.576 3.824 75.552 0.112L81.056 1.648C81.504 1.776 81.888 2.032 81.888 2.544C81.888 3.12 80.6721 4.08 79.84 4.784C79.7761 5.296 79.648 7.408 79.584 8.752H85.664L87.5201 6.896C88.16 6.256 88.2881 6.128 88.5441 6.128C88.9281 6.128 89.3761 6.512 89.6961 6.768L91.872 8.624C92.2561 8.944 92.512 9.136 92.512 9.584ZM93.6001 25.008C93.6001 25.584 93.0881 25.712 92.6401 25.712H71.904C69.92 25.712 66.336 25.904 63.712 26.416L62.176 23.664C65.696 23.984 69.28 24.176 72.8 24.176H79.328C80.288 22 81.504 18.672 81.888 17.456C82.72 15.024 83.04 13.424 82.848 11.376L88.096 14.256C88.416 14.448 88.48 14.768 88.48 15.024C88.48 16.176 87.2 16.176 86.304 16.176C84.192 18.8 82.08 21.552 80.096 24.176H87.008L88.48 22.32C88.672 22.064 89.12 21.552 89.44 21.552C89.824 21.552 90.336 22 90.592 22.192L92.9601 24.048C93.2801 24.304 93.6001 24.56 93.6001 25.008ZM75.6161 19.824C75.6161 20.208 75.616 22.32 73.632 22.32C71.904 22.32 71.7121 20.976 71.2001 18.16C70.6881 15.472 70.432 14.448 69.024 12.592L69.4081 12.336C72.6081 14.192 75.6161 16.368 75.6161 19.824ZM92.512 35.888C92.512 36.464 92 36.528 91.552 36.528H78.624V39.92C82.528 40.624 87.648 42.48 87.648 45.872C87.648 47.792 86.304 48.112 85.664 48.112C84.448 48.112 84.2561 47.728 82.9761 45.36C82.4641 44.336 80.8 41.584 78.624 40.752C78.688 42.8 79.0721 54.192 79.0721 55.472C79.0721 56.944 78.88 57.52 78.496 57.84C77.984 58.288 77.152 58.608 76.384 58.608C74.976 58.608 74.9761 57.648 74.9761 57.136C74.9761 56.752 75.296 52.976 75.36 52.144C75.552 49.328 75.744 44.272 75.744 39.6C72.864 44.144 65.632 51.44 60.96 53.104L60.768 52.784C67.04 47.216 71.2641 40.944 73.8241 36.528H72.736C70.688 36.528 67.104 36.784 64.48 37.296L63.008 34.544C66.528 34.8 70.048 34.992 73.632 34.992H75.744C75.4881 29.04 75.424 28.4 75.168 26.224L79.84 27.568C80.0961 27.632 80.736 27.888 80.736 28.464C80.736 28.976 79.904 29.488 78.944 30.064C78.816 31.344 78.688 32.24 78.624 34.992H85.984L87.328 33.2C87.84 32.56 88.0321 32.304 88.3521 32.304C88.736 32.304 89.312 32.752 89.568 32.944L91.872 34.864C92.192 35.12 92.512 35.376 92.512 35.888Z" />
                        </svg>
                        <h3 className="text-3xl ">(kaku shin)</h3>
                        <h4 className="text-xl">INNOVATION</h4>
                    </div>
                </div>
            </section>
        </>
    )
}

export default Heading